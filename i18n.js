// ==================== Internationalization (i18n) ====================
const translations = {
    ru: {
        nav: {
            home: 'Главная',
            generator: 'Генератор',
            dashboard: 'Панель',
            feedback: 'Отзыв',
            rate: 'Оценить',
            support: 'Поддержка',
            about: 'О нас',
            whatWeDo: 'Что мы делаем',
            whatsNew: 'Новое'
        },
        home: {
            title: 'ShadowLogin',
            desc1: 'ShadowLogin — это академический прототип, демонстрирующий, как временные, ориентированные на приватность виртуальные аккаунты могут защитить личные данные при тестировании, адаптации или исследовательских задачах. Система генерирует краткосрочные идентичности, которые снижают связываемость между сервисами, минимизируют воздействие отслеживания и обеспечивают безопасную среду для тестирования и демонстрации пользовательского интерфейса.',
            desc2: 'Эта демонстрация делает упор на приватность, прозрачность дизайна и образовательную ценность. Она преднамеренно избегает подключения к каким-либо внешним сервисам; все сгенерированные данные являются синтетическими и хранятся локально только в целях демонстрации.',
            cta: 'Начать генерировать'
        },
        generator: {
            title: 'Генератор',
            desc: 'Генератор создает одноразовые виртуальные аккаунты нескольких типов. Выберите тип аккаунта ниже, настройте параметры и сгенерируйте временный профиль. Сгенерированные аккаунты включают дополнительные поля (имя пользователя, полное имя, email, телефон и аватар). Выберите страну для форматирования номера телефона, установите уровень приватности и выберите время жизни аккаунта. Эти выборы влияют на оценку приватности — демонстрационную метрику, указывающую относительную идентифицируемость.',
            selectType: 'Выберите тип аккаунта',
            typeSubtitle: 'Выберите тип виртуального аккаунта, который вы хотите сгенерировать',
            social: 'Профиль социальной сети',
            socialDesc: 'Имя пользователя, Имя, Аватар, Биография',
            email: 'Аккаунт в стиле Email',
            emailDesc: 'Email, Пароль, Информация восстановления',
            website: 'Регистрация на веб-сайте',
            websiteDesc: 'Имя пользователя, Email, Полное имя',
            gaming: 'Игровой профиль',
            gamingDesc: 'Игровой ник, Уровень, Аватар',
            anonymous: 'Анонимный профиль',
            anonymousDesc: 'Минимум данных, Высокая приватность',
            custom: 'Пользовательский профиль',
            customDesc: 'Выберите свои собственные поля',
            back: '← Назад',
            configTitle: 'Настроить аккаунт',
            includeFields: 'Включить поля данных',
            fieldUsername: 'Имя пользователя / Прозвище',
            fieldFullName: 'Полное имя (случайное)',
            fieldEmail: 'Демонстрационный email',
            fieldPhone: 'Поддельный номер телефона',
            fieldAvatar: 'Случайный аватар',
            country: 'Страна (для форматирования телефона)',
            lifetime: 'Время жизни аккаунта',
            lifetimeOptions: {
                five: '5 минут',
                ten: '10 минут',
                thirty: '30 минут',
                hour: '1 час'
            },
            privacy: 'Уровень приватности',
            privacyOptions: {
                basic: 'Базовый',
                basicDesc: 'Стандартные данные профиля',
                medium: 'Средний',
                mediumDesc: 'Ограниченные личные данные',
                full: 'Полностью анонимный',
                fullDesc: 'Только минимальные данные'
            },
            score: 'Оценка приватности',
            scoreModerate: 'Умеренная приватность',
            generate: 'Генерировать виртуальный аккаунт',
            success: 'Виртуальный аккаунт успешно создан!'
        },
        dashboard: {
            title: 'Панель управления',
            total: 'Всего аккаунтов',
            active: 'Активные аккаунты',
            expired: 'Истекшие аккаунты',
            privacy: 'Оценка приватности',
            generated: 'Созданные аккаунты',
            activity: 'Журнал активности',
            clearAll: 'Очистить все',
            noAccounts: 'Нет аккаунтов',
            noHint: 'Создайте свой первый аккаунт для начала',
            accountDisplay: {
                username: 'Имя пользователя:',
                fullName: 'Полное имя:',
                email: 'Email:',
                phone: 'Телефон:',
                gamerTag: 'Игровой ник:',
                bio: 'Биография:',
                country: 'Страна:',
                privacyLevel: 'Уровень приватности:',
                privacyScore: 'Оценка приватности:',
                expiresIn: 'Истекает через:',
                copyAll: 'Копировать все',
                deactivate: 'Деактивировать',
                share: 'Поделиться',
                generateAnother: 'Генерировать другой'
            },
            activityLog: {
                generated: 'Аккаунт создан:'
            }
        },
        feedback: {
            title: 'Отзыв',
            desc: 'Отзывы помогают улучшить прототип. Эта демонстрационная форма обратной связи собирает впечатления и предложения по улучшению — данные сохраняются локально только в целях демонстрации.',
            name: 'Имя',
            namePlaceholder: 'Ваше имя',
            email: 'Email',
            emailPlaceholder: 'вы@example.com',
            message: 'Ваш отзыв',
            messagePlaceholder: 'Что вы думаете о ShadowLogin...',
            send: 'Отправить отзыв',
            submitted: '✓ Отзыв отправлен'
        },
        rate: {
            title: 'Оцените нас',
            desc: 'Оценки дают легкий сигнал удовлетворенности пользователя. В этой демонстрации оценки сохраняются локально и используются только для иллюстрации циклов обратной связи в дизайне продукта.',
            thanks: 'Спасибо за оценку'
        },
        support: {
            title: 'Техническая поддержка',
            desc: 'Этот интерфейс демонстрационного чата имитирует канал поддержки, где пользователи могут задавать вопросы об использовании ShadowLogin. Все сообщения остаются локальными, а бот отвечает консервированными, образовательными ответами.',
            hello: 'Привет! Это демонстрационный бот поддержки. Чем я могу помочь?',
            placeholder: 'Введите сообщение',
            send: 'Отправить',
            reply: 'Это демонстрационный ответ. Для живой поддержки, пожалуйста, свяжитесь с командой.'
        },
        about: {
            title: 'О нас',
            desc1: 'ShadowLogin был создан как академический прототип студентами и исследователями, сосредоточенными на конфиденциальных демонстрациях, сохраняющих конфиденциальность. Основная цель — продемонстрировать, как временные виртуальные аккаунты могут быть использованы для поддержки тестирования UX и образования по приватности без раскрытия реальных данных пользователей.',
            desc2: 'Преподаватели и рецензенты должны учитывать, что это намеренно изолировано от реальных систем аутентификации; оно иллюстрирует паттерны дизайна, а не развертывание в производстве.'
        },
        whatWeDo: {
            title: 'Что мы делаем',
            desc: 'ShadowLogin демонстрирует несколько функций, актуальных для прототипов, ориентированных на приватность:',
            feature1: 'Генерировать временные аккаунты с выбираемыми полями.',
            feature2: 'Регулировать уровень приватности и наблюдать демонстрационную оценку приватности.',
            feature3: 'Отслеживать жизненный цикл с помощью статистики панели и журналов активности.',
            feature4: 'Делиться или деактивировать демонстрационные аккаунты как часть рабочего процесса тестирования.',
            feature5: 'Собирать отзывы и оценки локально для оценки.'
        },
        whatsNew: {
            title: 'Новое',
            desc: 'Недавние обновления в этом расширенном издании включают многотипную генерацию аккаунтов, улучшенную панель управления, адаптивность мобильных устройств, демонстрационный чат и улучшенный расчет приватности. Эти изменения углубляют образовательную ценность и делают демонстрацию подходящей для сред презентации.',
            update1: 'Многотипная генерация аккаунтов (Социальные сети, Email, Веб-сайт, Игры, Анонимный, Пользовательский)',
            update2: 'Постоянное локальное хранилище и управление жизненным циклом',
            update3: 'Оценка приватности и визуальные индикаторы',
            update4: 'Действия «Поделиться» и «Деактивировать»',
            update5: 'Адаптивный пользовательский интерфейс для мобильных устройств с закрепленной навигацией'
        },
        ui: {
            title: 'UI & Общие требования',
            desc: 'Эта демонстрация соответствует мобильному, темному киберсекьюритности. Навигация липкая и использует плавную прокрутку с выделением активного раздела. Анимации тонкие и предназначены для привлечения внимания к событиям жизненного цикла (генерация и истечение аккаунта) без отвлечения. Прототип намеренно избегает внешних интеграций — это изолированная академическая демонстрация.'
        }
    },
    kk: {
        nav: {
            home: 'Басты',
            generator: 'Генератор',
            dashboard: 'Бөлік',
            feedback: 'Пікір',
            rate: 'Бағалау',
            support: 'Қолдау',
            about: 'Туралы',
            whatWeDo: 'Біз не істейміз',
            whatsNew: 'Жаңа'
        },
        home: {
            title: 'ShadowLogin',
            desc1: 'ShadowLogin — бұл ішінара құпиялыға бағытталған виртуальды аккаунттар сынақты, өндіктену немесе зерттеу тапсырмалары кезінде ішінара деректерді қорғауға көмектесе алады деген академиялық прототип. Жүйе қысқа мерзімді сәйкестендірулер құрады, олар қызметтер арасындағы байланыстарды азайтады, іздеу ықтималдығын төмендетеді және пайдаланушы интерфейстерін сынау үшін қауіпсіз орта ұсынады.',
            desc2: 'Бұл демонстрация құпиялықты, дизайн ашықтығын және білім беру құндылығын ерекшелейді. Ол ерік білен кез келген сыртқы қызметтерге қосылудан қашықтайды; барлық құрылған деректер синтетикалық және тек демонстрация мақсатты үшін жергіліктіде сақталады.',
            cta: 'Генерациялауды бастау'
        },
        generator: {
            title: 'Генератор',
            desc: 'Генератор бірнеше түрдегі бір реттік виртуальды аккаунттарды құрады. Төменде аккаунт түрін таңдаңыз, параметрлерді баптаңыз және уақытша профилін құрыңыз. Құрылған аккаунттар қосымша өрістерді қамтиды (пайдаланушы аты, толық атауы, электрондық пошта, телефон және аватар). Телефон нөмерінің форматтау үшін елді таңдаңыз, құпиялық деңгейін орнатыңыз және аккаунттың өмір ұзақтығын таңдаңыз. Бұл таңдаулар құпиялық ұпайын өзгертеді — салыстырмалы анықталушылықты көрсететін демонстрациялық метрика.',
            selectType: 'Аккаунт түрін таңдаңыз',
            typeSubtitle: 'Құрғысы келген виртуальды аккаунт түрін таңдаңыз',
            social: 'Әлеуметтік медиа профилі',
            socialDesc: 'Пайдаланушы аты, Атауы, Аватар, Биография',
            email: 'Электрондық пошта тәрізді аккаунт',
            emailDesc: 'Электрондық пошта, Құпия сөз, Қалпына келтіру ақпараты',
            website: 'Веб-сайт тіркеуі',
            websiteDesc: 'Пайдаланушы аты, Электрондық пошта, Толық атауы',
            gaming: 'Ойын профилі',
            gamingDesc: 'Ойындық атау, Деңгей, Аватар',
            anonymous: 'Анонимды профиль',
            anonymousDesc: 'Минимум деректер, Жоғары құпиялық',
            custom: 'Өзіндік профиль',
            customDesc: 'Өз өрістеріңізді таңдаңыз',
            back: '← Артқа',
            configTitle: 'Аккаунтты баптау',
            includeFields: 'Деректер өрістерін қосу',
            fieldUsername: 'Пайдаланушы аты / Лақап аты',
            fieldFullName: 'Толық атауы (орындық)',
            fieldEmail: 'Электрондық пошта',
            fieldPhone: 'Жалған телефон нөмері',
            fieldAvatar: 'Орындық аватар',
            country: 'Ел (телефон форматтау үшін)',
            lifetime: 'Аккаунт өмір ұзақтығы',
            lifetimeOptions: {
                five: '5 минут',
                ten: '10 минут',
                thirty: '30 минут',
                hour: '1 сағат'
            },
            privacy: 'Құпиялық деңгейі',
            privacyOptions: {
                basic: 'Негіздеме',
                basicDesc: 'Стандартты профиль деректері',
                medium: 'Орта',
                mediumDesc: 'Шектеулі жеке деректер',
                full: 'Толық анонимды',
                fullDesc: 'Тек минимальды деректер'
            },
            score: 'Құпиялық ұпайы',
            scoreModerate: 'Орта құпиялық',
            generate: 'Виртуальды аккаунтты құру',
            success: 'Виртуальды аккаунт сәтті құрылды!'
        },
        dashboard: {
            title: 'Басқару панелі',
            total: 'Барлық аккаунттар',
            active: 'Белсенді аккаунттар',
            expired: 'Өткені аккаунттар',
            privacy: 'Құпиялық ұпайы',
            generated: 'Құрылған аккаунттар',
            activity: 'Әрекет журналы',
            clearAll: 'Барлығын тазалау',
            noAccounts: 'Аккаунттар жоқ',
            noHint: 'Бастау үшін первый аккаунтын құрыңыз',
            accountDisplay: {
                username: 'Пайдаланушы аты:',
                fullName: 'Толық атауы:',
                email: 'Email:',
                phone: 'Телефон:',
                gamerTag: 'Ойын атауы:',
                bio: 'Биография:',
                country: 'Ел:',
                privacyLevel: 'Құпиялық деңгейі:',
                privacyScore: 'Құпиялық ұпайы:',
                expiresIn: 'Мерзімі өткеніне дейін:',
                copyAll: 'Барлығын көшіру',
                deactivate: 'Деактивациялау',
                share: 'Ортақтау',
                generateAnother: 'Басқасын құру'
            },
            activityLog: {
                generated: 'Аккаунт құрылды:'
            }
        },
        feedback: {
            title: 'Пікір',
            desc: 'Пікірлер прототипті жақсартуға көмектеседі. Бұл демонстрациялық кері байланыс формасы түпсініктеме және өнінсаулақ ұсыныстарын жинайды — деректер тек демонстрация мақсатты үшін жергіліктіде сақталады.',
            name: 'Атауы',
            namePlaceholder: 'Сіздің атыңыз',
            email: 'Электрондық пошта',
            emailPlaceholder: 'сіз@example.com',
            message: 'Сіздің пікіріңіз',
            messagePlaceholder: 'ShadowLogin туралы сіз не ойлайсыз...',
            send: 'Пікір жіберу',
            submitted: '✓ Пікір жіберілді'
        },
        rate: {
            title: 'Бізді бағалаңыз',
            desc: 'Рейтингтер пайдаланушы ынамдың жеңіл сигналын береді. Бұл демонстрацияда бағалар жергіліктіде сақталады және тек өнім дизайнындағы кері байланыс циклдарын көрсету үшін пайдаланылады.',
            thanks: 'Баға бергеніңіз үшін рахмет'
        },
        support: {
            title: 'Техникалық қолдау',
            desc: 'Бұл чат интерфейсі ShadowLogin пайдалану туралы сұрақтар қоя алатын пайдаланушылар үшін қолдау арнасын имитациялайды. Барлық хабарламалар жергіліктіде қалады және бот консервіленген, білімді ответтерінің берейді.',
            hello: 'Сәлем! Бұл қолдау боты. Мен сізге қалай көмектесе алам?',
            placeholder: 'Хабарламаны енгізіңіз',
            send: 'Жіберу',
            reply: 'Бұл жауап. Өмір ішіндегі қолдау үшін, команданы хабарласыңыз.'
        },
        about: {
            title: 'Туралы',
            desc1: 'ShadowLogin құпиялық-сақтау демонстрациялаушыларына негіздеген студенттер мен ғалымдар ретінде академиялық прототип ретінде құрылған. Негізгі мақсат — уақытша виртуальды аккаунттар пайдаланушы UX-тестін және құпиялық білімін қалай қолдай алады деген дизайн нақтыларын көрсету, бірақ шынайы пайдаланушы деректерін ашпай.',
            desc2: 'Оқытушылар мен рецензенттер мына ойлау керек: бұл ортақ аутентификация жүйелерінен ерік білен бөлініс; ол дизайн үлгілерін көрсетеді, өндіктену ойнарасын емес.'
        },
        whatWeDo: {
            title: 'Біз не істейміз',
            desc: 'ShadowLogin құпиялық-фокустылы прототиптерге байланысты бірнеше ұзақтарын көрсетеді:',
            feature1: 'Таңдалатын өрістермен уақытша аккаунттарды құру.',
            feature2: 'Құпиялық деңгейін реттеу және құпиялық ұпайын бақылау.',
            feature3: 'Панель статистикасы және әрекет журналдарымен өмір ұзақтығын қадағалау.',
            feature4: 'Сынау процесінің бөлігі ретінде аккаунттарды ортақтау немесе деактивациялау.',
            feature5: 'Бағалау үшін пікір мен рейтингтерді жергіліктіде жинау.'
        },
        whatsNew: {
            title: 'Жаңа',
            desc: 'Бұл кеңейтілген шығарымындағы соңғы жаңартулар көп түрлі аккаунт құрастыруды, төмендетілген басқару панелін, мобильдік құрылғыға төзімділік, чатты және төмендетілген құпиялық есептеуді қамтиды. Бұл өзгерістер білім беру құндылығын терендетеді және демонстрацияны сценарий ортасы үшін орынды істейді.',
            update1: 'Көп түрлі аккаунт құрастыру (Әлеуметтік медиа, Электрондық пошта, Веб-сайт, Ойындар, Анонимды, Өзіндік)',
            update2: 'Ұстамды жергіліктіде қоймалау және өмір ұзақтығын басқару',
            update3: 'Құпиялық ұпайы және визуалды индикаторлар',
            update4: '«Ортақтау» және «Деактивациялау» әрекеттері',
            update5: 'Мобильді дейс үшін адаптивті пайдаланушы интерфейсі жабдықталған навигацией'
        },
        ui: {
            title: 'UI және Жалпы талаптар',
            desc: 'Бұл демонстрация мобильді, қараңғы киберқауіпсіздік тақырыбын ұстанады. Навигация жабысқақ және түзу айналасында плавная айнала және белсенді бөлім ерекшелеуі бар. Анимациялар ұсақ және өмірлік цикл оқиғаларына (аккаунт құру және жарамдылықтың бітуі) назар аудартуға арналған, бірақ айлантпайтын. Прототип сыртқы интеграцияларды орынды ретінде қашықтаулайды — бұл оқшамасынан босаналған академиялық демонстрация.'
        }
    }
};

// Текущий язык
let currentLanguage = localStorage.getItem('shadowlogin_lang') || 'ru';

// Функция получения перевода
function t(key) {
    const keys = key.split('.');
    let value = translations[currentLanguage];
    
    for (const k of keys) {
        if (value && typeof value === 'object') {
            value = value[k];
        } else {
            return key; // Вернуть ключ, если перевод не найден
        }
    }
    
    return value || key;
}

// Инициализация языка при загрузке
function initLanguage() {
    const currentLang = localStorage.getItem('shadowlogin_lang') || 'ru';
    setLanguage(currentLang);
}

// Установка языка и обновление интерфейса
function setLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('shadowlogin_lang', lang);
    
    // Обновить кнопки выбора языка
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('lang-active');
    });
    document.querySelector(`[data-lang="${lang}"]`)?.classList.add('lang-active');
    
    // Обновить все переводимые элементы
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const text = t(key);
        
        // Если это input или textarea, обновить placeholder
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            // Проверить наличие data-i18n-placeholder атрибута
            const placeholderKey = element.getAttribute('data-i18n-placeholder');
            if (placeholderKey) {
                element.placeholder = t(placeholderKey);
            } else {
                element.placeholder = text;
            }
        } else {
            element.textContent = text;
        }
    });
    
    // Обновить document lang атрибут
    document.documentElement.lang = lang;
}

// Слушатели на кнопки языка
function setupLanguageSwitcher() {
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const lang = btn.getAttribute('data-lang');
            setLanguage(lang);
        });
    });
}
